!function(){const e=document.getElementById("todo-list"),t=document.getElementById("user-todo"),n=document.querySelector("form");let o=[],c=[];function r({id:t,userId:n,title:o,completed:r}){const i=document.createElement("li");i.className="todo-item",i.dataset.id=String(t),i.innerHTML=`<span>${o} <i>by</i> <b>${function(e){return c.find((({id:t})=>e===t))?.name||""}(n)}</b></span>`;const d=document.createElement("input");d.type="checkbox",d.checked=r,d.addEventListener("change",a);const l=document.createElement("span");l.innerHTML="&times;",l.className="close",l.addEventListener("click",s),i.prepend(d),i.append(l),e?.prepend(i)}function i(e){alert(e.message)}function a(){const e=this.parentElement;if(e){const t=e.dataset.id,n=this.checked;t&&async function(e,t){try{if(!(await fetch(`https://jsonplaceholder.typicode.com/todos/${e}`,{method:"PATCH",body:JSON.stringify({completed:t}),headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to connect with the server! Please try later.")}catch(e){e instanceof Error&&i(e)}}(t,n)}}function s(){const t=this.parentElement;if(t){const n=t.dataset.id;n&&async function(t){try{if(!(await fetch(`https://jsonplaceholder.typicode.com/todos/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}})).ok)throw new Error("Failed to connect with the server! Please try later.");!function(t){if(e){o=o.filter((e=>e.id!==t));const n=e.querySelector(`[data-id="${t}"]`);n&&(n.querySelector("input")?.removeEventListener("change",a),n.querySelector(".close")?.removeEventListener("click",s),n.remove())}}(t)}catch(e){e instanceof Error&&i(e)}}(n)}}async function d(){try{const e=await fetch("https://jsonplaceholder.typicode.com/todos?_limit=15");return await e.json()}catch(e){return e instanceof Error&&i(e),[]}}async function l(){try{const e=await fetch("https://jsonplaceholder.typicode.com/users?_limit=5");return await e.json()}catch(e){return e instanceof Error&&i(e),[]}}document.addEventListener("DOMContentLoaded",(function(){Promise.all([d(),l()]).then((e=>{[o,c]=e,o.forEach((e=>r(e))),c.forEach((e=>function(e){if(t){const n=document.createElement("option");n.value=String(e.id),n.innerText=e.name,t.append(n)}}(e)))}))})),n?.addEventListener("submit",(function(e){e.preventDefault(),n&&async function(e){try{const t=await fetch("https://jsonplaceholder.typicode.com/todos",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}});r(await t.json())}catch(e){e instanceof Error&&i(e)}}({userId:Number(n.user.value),title:n.todo.value,completed:!1})}))}();
//# sourceMappingURL=index.61831b03.js.map
